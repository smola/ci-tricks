language: go
go: 1.9.x
env:
  global:
    - TEST_LIVE: 1
matrix:
  fast_finish: true
install:
  - wget -qO - https://raw.githubusercontent.com/smola/ci-tricks/example/get.sh | bash
script:
  - go test -v ./...
jobs:
  include:
    - {os: linux, dist: trusty, sudo: required, env: 'POSTGRESQL_VERSION=9.2'}
    - {os: linux, dist: trusty, sudo: required, env: 'POSTGRESQL_VERSION=9.3'}
    - {os: linux, dist: trusty, sudo: required, env: 'POSTGRESQL_VERSION=9.4'}
    - {os: linux, dist: trusty, sudo: required, env: 'POSTGRESQL_VERSION=9.5'}
    - {os: linux, dist: trusty, sudo: required, env: 'POSTGRESQL_VERSION=9.6'}
    - {os: linux, dist: trusty, sudo: required, env: 'RABBITMQ_VERSION=any'}
    - {os: osx, osx_image: xcode8.3,            env: 'POSTGRESQL_VERSION=9.4'}
    - {os: osx, osx_image: xcode8.3,            env: 'POSTGRESQL_VERSION=9.5'}
    - {os: osx, osx_image: xcode8.3,            env: 'POSTGRESQL_VERSION=9.6'}
    - {os: osx, osx_image: xcode8.3,            env: 'POSTGRESQL_VERSION=10'}
    - {os: osx, osx_image: xcode8.3,            env: 'RABBITMQ_VERSION=any'}
    - {os: osx, osx_image: xcode9.3,            env: 'POSTGRESQL_VERSION=9.4'}
    - {os: osx, osx_image: xcode9.3,            env: 'POSTGRESQL_VERSION=9.5'}
    - {os: osx, osx_image: xcode9.3,            env: 'POSTGRESQL_VERSION=9.6'}
    - {os: osx, osx_image: xcode9.3,            env: 'POSTGRESQL_VERSION=10'}
    - {os: osx, osx_image: xcode9.3,            env: 'RABBITMQ_VERSION=any'}
